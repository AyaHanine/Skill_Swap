{% extends 'base.html.twig' %}

{% block title %}Gestion des comp√©tences{% endblock %}

{% block body %}
    <div class="container mt-5">
        <h1 class="text-center mb-4 text-primary">Gestion des comp√©tences</h1>

        <!-- Bouton pour ajouter une comp√©tence -->
        <div class="d-flex justify-content-end mb-3">
            <a href="{{ path('add_skill') }}" class="btn btn-outline-success btn-lg">Ajouter une comp√©tence</a>
        </div>

        <!-- Formulaire de recherche -->
        {{ form_start(form, {'attr': {'class': 'mb-4 flex space-x-2'}}) }}
            {{ form_widget(form.name, {'attr': {'class': 'w-1/2 p-2 border border-gray-300 rounded-lg'}}) }}
            {{ form_widget(form.status, {'attr': {'class': 'w-1/3 p-2 border border-gray-300 rounded-lg'}}) }}
            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">
                üîç Rechercher
            </button>
        {{ form_end(form) }}

        <!-- Tableau des comp√©tences -->
        <div class="card shadow-sm">
            <div class="card-body">
                <table class="table table-hover table-striped">
                    <thead class="table-dark">
                        <tr>
                            <th scope="col">Nom</th>
                            <th scope="col">Statut</th>
                            <th scope="col" class="text-center">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for skill in skills %}
                            <tr>
                                <td>{{ skill.name }}</td>
                                <td>
                                    <span class="badge {% if skill.status == 'en attente' %}bg-warning text-dark{% elseif skill.status.value == 'valid√©' %}bg-success{% else %}bg-secondary{% endif %}">
                                        {{ skill.status.value }}
                                    </span>
                                </td>
                                <td class="text-center">
                                    {% if skill.status.value == 'en attente' %}
                                        <a href="{{ path('validate_skill', {'id': skill.id}) }}" class="btn btn-outline-success btn-sm mx-1" title="Valider cette comp√©tence">
                                            <i class="fas fa-check-circle"></i> Valider
                                        </a>
                                        <a href="{{ path('reject_skill', {'id': skill.id}) }}" class="btn btn-outline-danger btn-sm mx-1" title="Rejeter cette comp√©tence">
                                            <i class="fas fa-times-circle"></i> Rejeter
                                        </a>
                                    
                                    {% endif %}
                                    {% if skill.status.value == 'valid√©' %}
                                        <a href="{{ path('delete_skill', {'id': skill.id}) }}" class="btn btn-outline-danger btn-sm mx-1" onclick="return confirm('√ätes-vous s√ªr de vouloir supprimer cette comp√©tence ?')" title="Supprimer cette comp√©tence">
                                            <i class="fas fa-trash-alt"></i> Supprimer
                                        </a>
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
{% endblock %}
